import{u as Q,r as c,s as u,j as e}from"./index-DC7Rq-5w.js";import{G as V}from"./GameNavigation-B9C5t8RG.js";const te=({setPage:X,gamesList:Y,currentGame:z})=>{const{difficulty:P}=Q(),b=22,m=12,f=38,K=s=>{const a={easy:1200,normal:1e3,hard:700}[P]||1e3;return Math.max(100,a-(s-1)*50)},C={I:{shape:[[1,1,1,1]],color:"bg-cyan-500"},O:{shape:[[1,1],[1,1]],color:"bg-yellow-500"},T:{shape:[[0,1,0],[1,1,1]],color:"bg-purple-500"},S:{shape:[[0,1,1],[1,1,0]],color:"bg-green-500"},Z:{shape:[[1,1,0],[0,1,1]],color:"bg-red-500"},J:{shape:[[1,0,0],[1,1,1]],color:"bg-blue-500"},L:{shape:[[0,0,1],[1,1,1]],color:"bg-orange-500"}},E=()=>Array(b).fill(null).map(()=>Array(m).fill(null)),[h,L]=c.useState(E()),[n,S]=c.useState(null),[i,g]=c.useState({x:0,y:0}),[k,A]=c.useState(0),[j,M]=c.useState(1),[O,B]=c.useState(0),[I,Z]=c.useState(0),[x,R]=c.useState(!1),[p,D]=c.useState(!1),[w,G]=c.useState(null),T=()=>{const s=Object.keys(C),t=s[Math.floor(Math.random()*s.length)];return{...C[t],type:t}},_=s=>s[0].map((a,r)=>s.map(l=>l[r]).reverse()),y=(s,t,a)=>{for(let r=0;r<s.length;r++)for(let l=0;l<s[r].length;l++)if(s[r][l]){const o=t.x+l,d=t.y+r;if(o<0||o>=m||d>=b||d>=0&&a[d][o])return!0}return!1},F=()=>{const s=h.map(t=>[...t]);return n.shape.forEach((t,a)=>{t.forEach((r,l)=>{if(r){const o=i.y+a,d=i.x+l;o>=0&&o<b&&d>=0&&d<m&&(s[o][d]=n.color)}})}),s},J=s=>{let t=0;const a=s.filter(r=>r.every(l=>l!==null)?(t++,!1):!0);for(;a.length<b;)a.unshift(Array(m).fill(null));if(t>0){u.playCoin();const r=t===1?100:t===2?300:t===3?500:800;A(l=>l+r),B(l=>{const o=l+t;return M(Math.floor(o/10)+1),o%10===0&&u.playPowerUp(),o})}return a},$=()=>{const s=w||T(),t={x:Math.floor(m/2)-1,y:0};if(y(s.shape,t,h)){R(!0),Z(a=>Math.max(a,k)),u.playLose();return}S(s),g(t),G(T())},N=c.useCallback(()=>{if(!n||x||p)return;const s={x:i.x,y:i.y+1};if(y(n.shape,s,h)){u.playHit();const t=F(),a=J(t);L(a),$()}else g(s)},[n,i,h,x,p]),v=s=>{if(!n||x||p)return;const t={x:i.x+s,y:i.y};y(n.shape,t,h)||(g(t),u.playClick())},H=()=>{if(!n||x||p)return;const s=_(n.shape);y(s,i,h)||(S({...n,shape:s}),u.playClick())},U=()=>{if(!n||x||p)return;let s={...i};for(;!y(n.shape,{x:s.x,y:s.y+1},h);)s.y++;g(s)};c.useEffect(()=>{!n&&!x&&$()},[n,x]),c.useEffect(()=>{const s=t=>{if(!x)switch(t.key){case"ArrowLeft":v(-1);break;case"ArrowRight":v(1);break;case"ArrowDown":N();break;case"ArrowUp":H();break;case" ":t.preventDefault(),U();break;case"p":D(a=>!a);break}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[n,i,h,x]),c.useEffect(()=>{const s=K(j),t=setInterval(N,s);return()=>clearInterval(t)},[N,j,P]);const W=()=>{L(E()),S(null),G(null),g({x:0,y:0}),A(0),M(1),B(0),R(!1),D(!1)},q=()=>{const s=h.map(t=>[...t]);return n&&n.shape.forEach((t,a)=>{t.forEach((r,l)=>{if(r){const o=i.y+a,d=i.x+l;o>=0&&o<b&&d>=0&&d<m&&(s[o][d]=n.color)}})}),s};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 py-8 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx(V,{currentGame:z,setPage:X,gamesList:Y}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h2",{className:"text-4xl font-bold text-white mb-2 flex items-center justify-center gap-3",children:["üü¶ ",e.jsx("span",{className:"bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:"Tetris"})]}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Arrow Keys: Move/Rotate | Space: Drop | P: Pause"}),p&&e.jsx("div",{className:"text-yellow-400 font-bold animate-pulse",children:"‚è∏ PAUSED"})]}),e.jsxs("div",{className:"flex justify-center gap-6 flex-wrap mb-6",children:[e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"relative bg-gradient-to-br from-gray-950 to-gray-900 border-4 border-cyan-500 rounded-xl shadow-2xl shadow-cyan-500/30 overflow-hidden",style:{width:m*f,height:b*f},children:q().map((s,t)=>s.map((a,r)=>e.jsx("div",{className:`absolute border border-gray-800/50 transition-all duration-150 ${a||"bg-gray-900/50"}`,style:{left:r*f,top:t*f,width:f,height:f,boxShadow:a?"0 0 10px rgba(0,0,0,0.5)":"none"}},`${t}-${r}`)))})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border-2 border-cyan-500/30 shadow-lg min-w-[200px]",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4 border-b border-cyan-500/30 pb-2",children:"üìä Stats"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Score"}),e.jsx("span",{className:"text-2xl font-bold text-cyan-400",children:k})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Level"}),e.jsx("span",{className:"text-xl font-bold text-blue-400",children:j})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Lines"}),e.jsx("span",{className:"text-xl font-bold text-green-400",children:O})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"High Score"}),e.jsx("span",{className:"text-lg font-bold text-yellow-400",children:I})]})]})]}),w&&e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl p-6 border-2 border-purple-500/30 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4 border-b border-purple-500/30 pb-2",children:"üîÆ Next"}),e.jsx("div",{className:"flex justify-center items-center h-24",children:e.jsx("div",{className:"relative",style:{width:"80px",height:"80px"},children:w.shape.map((s,t)=>s.map((a,r)=>a?e.jsx("div",{className:`absolute ${w.color} rounded-sm`,style:{left:r*18+10,top:t*18+10,width:16,height:16}},`${t}-${r}`):null))})})]})]})]}),e.jsxs("div",{className:"flex justify-center gap-3 mb-6 md:hidden",children:[e.jsx("button",{onClick:()=>v(-1),className:"bg-gradient-to-br from-gray-700 to-gray-800 text-white p-4 rounded-xl active:scale-95 transition-transform shadow-lg border border-cyan-500/30",children:e.jsx("span",{className:"text-2xl",children:"‚¨ÖÔ∏è"})}),e.jsx("button",{onClick:H,className:"bg-gradient-to-br from-purple-600 to-purple-700 text-white p-4 rounded-xl active:scale-95 transition-transform shadow-lg",children:e.jsx("span",{className:"text-2xl",children:"üîÑ"})}),e.jsx("button",{onClick:()=>v(1),className:"bg-gradient-to-br from-gray-700 to-gray-800 text-white p-4 rounded-xl active:scale-95 transition-transform shadow-lg border border-cyan-500/30",children:e.jsx("span",{className:"text-2xl",children:"‚û°Ô∏è"})}),e.jsx("button",{onClick:N,className:"bg-gradient-to-br from-blue-600 to-blue-700 text-white p-4 rounded-xl active:scale-95 transition-transform shadow-lg",children:e.jsx("span",{className:"text-2xl",children:"‚¨áÔ∏è"})}),e.jsx("button",{onClick:U,className:"bg-gradient-to-br from-cyan-600 to-cyan-700 text-white p-4 rounded-xl active:scale-95 transition-transform shadow-lg",children:e.jsx("span",{className:"text-2xl",children:"üí®"})})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl p-8 max-w-md mx-4 border-4 border-cyan-500 shadow-2xl shadow-cyan-500/50 transform animate-scaleIn",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:"üéÆ"}),e.jsx("h3",{className:"text-4xl font-bold text-white mb-2",children:"Game Over!"}),e.jsx("p",{className:"text-gray-400",children:"The blocks have reached the top!"})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 mb-6 border border-cyan-500/30",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"text-gray-400",children:"Final Score"}),e.jsx("span",{className:"text-3xl font-bold text-cyan-400",children:k})]}),e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"text-gray-400",children:"Level Reached"}),e.jsx("span",{className:"text-2xl font-semibold text-blue-400",children:j})]}),e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"text-gray-400",children:"Lines Cleared"}),e.jsx("span",{className:"text-2xl font-semibold text-green-400",children:O})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"High Score"}),e.jsxs("span",{className:"text-2xl font-bold text-yellow-400",children:["üèÜ ",I]})]})]}),e.jsx("button",{onClick:W,className:"w-full py-4 px-6 bg-gradient-to-r from-blue-500 to-cyan-600 text-white font-bold rounded-xl hover:scale-105 transition-all duration-300 shadow-lg shadow-cyan-500/50 text-lg",children:"üîÑ Play Again"})]})})]})})};export{te as default};
