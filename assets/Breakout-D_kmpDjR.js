import{u as $,r as l,j as e,s as h}from"./index-C_qtth0Q.js";import{G as ee}from"./GameNavigation-CEdBUd1g.js";const ae=({setPage:Y,gamesList:q,currentGame:U})=>{const{difficulty:H}=$(),o=1e3,d=700,z=130,y=22,c=16,Z=7,J=10,j=95,w=30,N=()=>{switch(H){case"easy":return{ballSpeed:2,paddleSpeed:10,paddleWidth:140};case"normal":return{ballSpeed:2.5,paddleSpeed:8,paddleWidth:120};case"hard":return{ballSpeed:3.5,paddleSpeed:7,paddleWidth:100};case"expert":return{ballSpeed:4.5,paddleSpeed:6,paddleWidth:80};default:return{ballSpeed:2.5,paddleSpeed:8,paddleWidth:120}}},I=l.useRef(null),[m,L]=l.useState(o/2-z/2),[B,A]=l.useState({x:o/2,y:d-40}),[S,D]=l.useState({x:2.5,y:-2.5}),[E,R]=l.useState([]),[g,F]=l.useState(0),[P,_]=l.useState(0),[M,K]=l.useState(3),[b,k]=l.useState(!1),[p,T]=l.useState(!1),[f,V]=l.useState(!1),W=l.useRef(null),C=l.useRef({}),O=()=>{const r=[],t=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8"];for(let s=0;s<Z;s++)for(let a=0;a<J;a++)r.push({x:a*(j+5)+35,y:s*(w+5)+50,active:!0,color:t[s]});return r},Q=()=>{const r=N();L(o/2-r.paddleWidth/2),A({x:o/2,y:d-40}),D({x:(Math.random()>.5?1:-1)*r.ballSpeed,y:-r.ballSpeed}),R(O()),F(0),K(3),k(!1),T(!1),V(!1)};return l.useEffect(()=>{R(O())},[]),l.useEffect(()=>{const r=s=>{C.current[s.key]=!0,!b&&!p&&s.key===" "&&(s.preventDefault(),k(!0))},t=s=>{C.current[s.key]=!1};return window.addEventListener("keydown",r),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",r),window.removeEventListener("keyup",t)}},[b,p]),l.useEffect(()=>{if(!b||p||f)return;const r=()=>{const t=N();C.current.ArrowLeft&&L(s=>Math.max(0,s-t.paddleSpeed)),C.current.ArrowRight&&L(s=>Math.min(o-t.paddleWidth,s+t.paddleSpeed)),A(s=>{let a=s.x+S.x,n=s.y+S.y,i=S.x,u=S.y;(a<=0||a>=o-c)&&(i=-i,a=a<=0?0:o-c,h.playHit()),n<=0&&(u=-u,n=0,h.playHit());const X=N();if(n+c>=d-y-5&&n<=d-y&&a+c>=m&&a<=m+X.paddleWidth){u=-Math.abs(u);const v=(a-m)/X.paddleWidth-.5;i+=v*2,n=d-y-c-5,h.playHit()}return R(v=>v.map(x=>x.active&&a+c>x.x&&a<x.x+j&&n+c>x.y&&n<x.y+w?(u=-u,F(G=>G+10),h.playCoin(),{...x,active:!1}):x)),n>d?(h.playError(),K(v=>{const x=v-1;return x<=0?(T(!0),_(G=>Math.max(G,g)),h.playLose()):(A({x:o/2,y:d-40}),D({x:2.5,y:-2.5}),k(!1)),x}),s):(D({x:i,y:u}),{x:a,y:n})}),E.every(s=>!s.active)&&(V(!0),_(s=>Math.max(s,g)),h.playWin()),W.current=requestAnimationFrame(r)};return W.current=requestAnimationFrame(r),()=>{W.current&&cancelAnimationFrame(W.current)}},[b,p,f,m,S,E,g,H]),l.useEffect(()=>{const r=I.current;if(!r)return;const t=r.getContext("2d"),s=N(),a=t.createLinearGradient(0,0,0,d);a.addColorStop(0,"#1a1a2e"),a.addColorStop(1,"#0f0f1e"),t.fillStyle=a,t.fillRect(0,0,o,d),E.forEach(i=>{i.active&&(t.fillStyle=i.color,t.fillRect(i.x,i.y,j,w),t.strokeStyle="#fff",t.lineWidth=2,t.strokeRect(i.x,i.y,j,w))});const n=t.createLinearGradient(m,0,m+s.paddleWidth,0);n.addColorStop(0,"#4ECDC4"),n.addColorStop(1,"#45B7D1"),t.fillStyle=n,t.fillRect(m,d-y-5,s.paddleWidth,y),t.fillStyle="#FFE66D",t.beginPath(),t.arc(B.x+c/2,B.y+c/2,c/2,0,Math.PI*2),t.fill(),t.strokeStyle="#FFF",t.lineWidth=2,t.stroke()},[m,B,E]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-lime-900 to-gray-900 py-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx(ee,{currentGame:U,setPage:Y,gamesList:q}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h2",{className:"text-4xl font-bold text-white mb-2 flex items-center justify-center gap-3",children:["üß± ",e.jsx("span",{className:"bg-gradient-to-r from-lime-400 to-green-500 bg-clip-text text-transparent",children:"Breakout"})]}),e.jsx("p",{className:"text-gray-300 mb-4",children:"‚Üê/‚Üí to move paddle | Space to start!"}),e.jsxs("div",{className:"flex items-center justify-center gap-8",children:[e.jsxs("div",{className:"text-2xl font-bold text-lime-400",children:["Score: ",g]}),e.jsxs("div",{className:"text-xl font-semibold text-red-400",children:["‚ù§Ô∏è Lives: ",M]}),e.jsxs("div",{className:"text-xl font-semibold text-green-400",children:["üèÜ Best: ",P]})]})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("canvas",{ref:I,width:o,height:d,className:"border-4 border-lime-500 rounded-xl shadow-2xl shadow-lime-500/30"}),!b&&!p&&!f&&M>0&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 backdrop-blur-sm rounded-xl",children:e.jsxs("div",{className:"text-center text-white animate-slideUp",children:[e.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:"üß±"}),e.jsx("p",{className:"text-2xl font-bold mb-2",children:"Press Space to Launch!"})]})})]})}),(p||f)&&e.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl p-8 max-w-md mx-4 border-4 border-lime-500 shadow-2xl shadow-lime-500/50 transform animate-scaleIn",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:f?"üéâ":"üò¢"}),e.jsx("h3",{className:"text-4xl font-bold text-white mb-2",children:f?"You Won!":"Game Over!"}),e.jsx("p",{className:"text-gray-400",children:f?"All bricks destroyed!":"Better luck next time!"})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 mb-6 border border-lime-500/30",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"text-gray-400",children:"Final Score"}),e.jsx("span",{className:"text-3xl font-bold text-lime-400",children:g})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"High Score"}),e.jsxs("span",{className:"text-2xl font-bold text-green-400",children:["üèÜ ",P]})]})]}),e.jsx("button",{onClick:Q,className:"w-full py-4 px-6 bg-gradient-to-r from-lime-500 to-green-600 text-white font-bold rounded-xl hover:scale-105 transition-all duration-300 shadow-lg shadow-lime-500/50 text-lg",children:"üîÑ Play Again"})]})})]})})};export{ae as default};
