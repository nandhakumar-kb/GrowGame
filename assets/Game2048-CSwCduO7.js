import{r as c,j as r,s as m}from"./index-0exomxAW.js";import{G as C}from"./GameNavigation-B2brCO2c.js";const M=({setPage:S,gamesList:G,currentGame:k})=>{const D=()=>Array(4).fill(null).map(()=>Array(4).fill(0)),g=s=>{const e=[];for(let t=0;t<4;t++)for(let a=0;a<4;a++)s[t][a]===0&&e.push({i:t,j:a});if(e.length>0){const{i:t,j:a}=e[Math.floor(Math.random()*e.length)];s[t][a]=Math.random()<.9?2:4}return s},p=()=>{let s=D();return s=g(s),s=g(s),s},[h,w]=c.useState(p),[b,j]=c.useState(0),[y,E]=c.useState(0),[x,v]=c.useState(!1),[u,N]=c.useState(!1),R=s=>({0:"bg-gray-700",2:"bg-amber-200 text-gray-800",4:"bg-amber-300 text-gray-800",8:"bg-orange-400 text-white",16:"bg-orange-500 text-white",32:"bg-orange-600 text-white",64:"bg-red-500 text-white",128:"bg-yellow-400 text-white",256:"bg-yellow-500 text-white",512:"bg-yellow-600 text-white",1024:"bg-amber-500 text-white",2048:"bg-amber-600 text-white"})[s]||"bg-purple-600 text-white",f=s=>{let e=s.map(n=>[...n]),t=!1,a=0;for(let n=0;n<4;n++){let i=e[n].filter(o=>o!==0);for(let o=0;o<i.length-1;o++)i[o]===i[o+1]&&(i[o]*=2,a+=i[o],i.splice(o+1,1));for(;i.length<4;)i.push(0);JSON.stringify(i)!==JSON.stringify(e[n])&&(t=!0),e[n]=i}return{grid:e,moved:t,points:a}},l=s=>s[0].map((e,t)=>s.map(a=>a[t]).reverse()),d=s=>{if(x)return;let e=h.map(a=>[...a]),t;s==="left"?t=f(e):s==="right"?(e=l(l(e)),t=f(e),t.grid=l(l(t.grid))):s==="up"?(e=l(l(l(e))),t=f(e),t.grid=l(t.grid)):s==="down"&&(e=l(e),t=f(e),t.grid=l(l(l(t.grid)))),t.moved&&(m.playClick(),t.grid=g(t.grid),w(t.grid),j(n=>n+t.points),t.points>0&&m.playCoin(),t.grid.some(n=>n.some(i=>i===2048))&&m.playWin(),_(t.grid)||(v(!0),E(n=>Math.max(n,b+t.points)),m.playLose()))},_=s=>{for(let e=0;e<4;e++)for(let t=0;t<4;t++)if(s[e][t]===0||t<3&&s[e][t]===s[e][t+1]||e<3&&s[e][t]===s[e+1][t])return!0;return!1};c.useEffect(()=>{const s=e=>{if(!x){if(e.key==="p"||e.key==="P"||e.key==="Escape"){e.preventDefault(),N(t=>!t),m.playClick();return}u||(e.key==="ArrowLeft"&&(e.preventDefault(),d("left")),e.key==="ArrowRight"&&(e.preventDefault(),d("right")),e.key==="ArrowUp"&&(e.preventDefault(),d("up")),e.key==="ArrowDown"&&(e.preventDefault(),d("down")))}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[h,x,u]);const I=()=>{w(p()),j(0),v(!1),N(!1)};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-amber-900 to-gray-900 py-8 px-4",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx(C,{currentGame:k,setPage:S,gamesList:G}),r.jsxs("div",{className:"text-center mb-6",children:[r.jsxs("h2",{className:"text-4xl font-bold text-white mb-2 flex items-center justify-center gap-3",children:["üî¢ ",r.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent",children:"2048"})]}),r.jsx("p",{className:"text-gray-300 mb-4",children:"Use Arrow Keys to merge tiles! | P: Pause"}),u&&r.jsx("div",{className:"text-yellow-400 font-bold animate-pulse",children:"‚è∏ PAUSED - Press P to Resume"}),r.jsxs("div",{className:"flex items-center justify-center gap-8",children:[r.jsxs("div",{className:"text-2xl font-bold text-amber-400",children:["Score: ",b]}),r.jsxs("div",{className:"text-xl font-semibold text-orange-400",children:["üèÜ Best: ",y]})]})]}),r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 p-5 rounded-2xl border-4 border-amber-500 shadow-2xl shadow-amber-500/30",children:r.jsx("div",{className:"grid grid-cols-4 gap-4",children:h.map((s,e)=>s.map((t,a)=>r.jsx("div",{className:`w-40 h-40 flex items-center justify-center text-5xl font-bold rounded-xl transition-all duration-200 ${R(t)}`,children:t!==0&&t},`${e}-${a}`)))})})}),r.jsx("div",{className:"flex justify-center mb-6 md:hidden",children:r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsx("div",{}),r.jsx("button",{onClick:()=>d("up"),className:"bg-gradient-to-br from-amber-600 to-amber-700 text-white p-5 rounded-xl active:scale-95 transition-transform shadow-lg",children:r.jsx("span",{className:"text-2xl",children:"‚¨ÜÔ∏è"})}),r.jsx("div",{}),r.jsx("button",{onClick:()=>d("left"),className:"bg-gradient-to-br from-amber-600 to-amber-700 text-white p-5 rounded-xl active:scale-95 transition-transform shadow-lg",children:r.jsx("span",{className:"text-2xl",children:"‚¨ÖÔ∏è"})}),r.jsx("button",{onClick:I,className:"bg-gradient-to-br from-gray-600 to-gray-700 text-white p-5 rounded-xl active:scale-95 transition-transform shadow-lg",children:r.jsx("span",{className:"text-2xl",children:"üîÑ"})}),r.jsx("button",{onClick:()=>d("right"),className:"bg-gradient-to-br from-amber-600 to-amber-700 text-white p-5 rounded-xl active:scale-95 transition-transform shadow-lg",children:r.jsx("span",{className:"text-2xl",children:"‚û°Ô∏è"})}),r.jsx("div",{}),r.jsx("button",{onClick:()=>d("down"),className:"bg-gradient-to-br from-amber-600 to-amber-700 text-white p-5 rounded-xl active:scale-95 transition-transform shadow-lg",children:r.jsx("span",{className:"text-2xl",children:"‚¨áÔ∏è"})})]})}),x&&r.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 animate-fadeIn",children:r.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl p-8 max-w-md mx-4 border-4 border-amber-500 shadow-2xl shadow-amber-500/50 transform animate-scaleIn",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"text-6xl mb-4",children:"üéÆ"}),r.jsx("h3",{className:"text-4xl font-bold text-white mb-2",children:"Game Over!"}),r.jsx("p",{className:"text-gray-400",children:"No more moves!"})]}),r.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-6 mb-6 border border-amber-500/30",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("span",{className:"text-gray-400",children:"Final Score"}),r.jsx("span",{className:"text-3xl font-bold text-amber-400",children:b})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"High Score"}),r.jsxs("span",{className:"text-2xl font-bold text-orange-400",children:["üèÜ ",y]})]})]}),r.jsx("button",{onClick:I,className:"w-full py-4 px-6 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-bold rounded-xl hover:scale-105 transition-all duration-300 shadow-lg shadow-amber-500/50 text-lg",children:"üîÑ Play Again"})]})})]})})};export{M as default};
